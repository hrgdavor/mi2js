var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,g,e){a instanceof String&&(a=String(a));for(var b=a.length,f=0;f<b;f++){var d=a[f];if(g.call(e,d,f,a))return{i:f,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,e){a!=Array.prototype&&a!=Object.prototype&&(a[g]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,g,e,b){if(g){e=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var f=a[b];f in e||(e[f]={});e=e[f]}a=a[a.length-1];b=e[a];g=g(b);g!=b&&null!=g&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(g){return $jscomp.SYMBOL_PREFIX+(g||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var g=0;return $jscomp.iteratorPrototype(function(){return g<a.length?{done:!1,value:a[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,g){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,b={next:function(){if(e<a.length){var f=e++;return{value:g(f,a[f]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(){var a=window.mi2JS=window.mi2JS||function(e,b){if(this instanceof a){if(this.el=e instanceof String?a.find(e,b):e,null===this.el)throw Error("null node or not found "+e);}else return new a(e,b)};a.tagNameReg=/^[A-Za-z]+[\w-_]*/;a.find=function(e,b){b=b||document.body;b instanceof a&&(b=b.el);return"#"==e.charAt(0)?b.getElementById(e.substring(1)):a.tagNameReg.test(e)?b.getElementsByTagName(e)[0]:b.querySelector(e)};a.findAll=function(e,b){b=b||document.body;b instanceof a&&(b=b.el);return a.tagNameReg.test(e)?
b.getElementsByTagName(e):b.querySelectorAll(e)};a.bind=function(a,b){return"string"==typeof b?function(){a[b].apply(a,arguments)}:b.bind?b.bind(a):function(){b.apply(a,arguments)}};a.extend=function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;return a.superClass=b.prototype};a.mixin=function(a,b,f){a=a.prototype;b=b.prototype;for(var d in b)a[d]||(a[d]=b[d])};a.update=function(e){for(var b,f=a.isArray(e),d=1;d<arguments.length;d++)b=arguments[d],void 0!==b&&null!==b&&(f?
g.apply(e,b):a.updateObj(e,b));return e};a.updateObj=function(a,b){for(var f,d=Object.keys(b),h=0;h<d.length;h++)f=d[h],a[f]=b[f]};a.isArray=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)};var g=Array.prototype.push;a.copy=function(e,b){var f=[a.isArray(e)?[]:{}];g.apply(f,arguments);f=Array.prototype.slice.call(arguments,0);f.unshift(a.isArray(e)?[]:{});return a.update.apply(this,f)};a.num=function(a){a=parseFloat(a);return isNaN(a)?0:a};a.logError=function(a,b,f){console.log(a,
b,f)};a.isEmpty=function(a){if(void 0===a||null===a||0===a)return!0;if(a instanceof Array||"string"==typeof a)return 0==a.length;if("object"==typeof a){for(var b in a)return!1;return!0}return!1};a.listen=function(e,b,f,d,h){var k=f;"string"==typeof f&&(k=d[f]);if(k&&"function"==typeof k){k=function(h){"string"==typeof f&&(f=d[f]);try{f.call(d||e,a.fixEvent(h))}catch(l){a.logError(l.message,l)}};if(e.addEventListener)return e.addEventListener(b,k,h),!0;if(e.attachEvent)return e.attachEvent("on"+b,
k);a.logError("object does not have addEventListener ",Error(),e)}else a.logError("listener not a function",Error(),{obj:e,listener:k,evt:b,scope:d})};a.fixEvent=function(a){a=a||window.event;a.stop=function(){this.preventDefault?(this.preventDefault(),this.stopPropagation()):this.returnValue=!1};a.target=a.target||a.srcElement;a.pointerX=function(){return this.pageX||this.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)};a.pointerY=function(){return this.pageY||this.clientY+
(document.documentElement.scrollTop||document.body.scrollTop)};return a};a.TagDef=function(a,b,f,d){this.tag=a;this.attr=b;this.children=f||[];this.html=d};a.NodeUpdater=function(){};a.NodeUpdater.prototype.update=function(){};a.NodeUpdater.prototype.makeNode=function(a,b){this.node=document.createTextNode("");a.insertBefore(this.node,b)};a.h=function(e,b){return new a.TagDef(e,b,Array.prototype.slice.call(arguments,2))};a.TRANS={};a.t=function(a){return this.TRANS[a]||a};a.makeAttrUpdater=function(a,
b,f){var d=function(){var d=f();a.getAttribute(b)!=d&&(!1===d?a.removeAttribute(b):a.setAttribute(b,d))};d.node=a;d.attr=b;d.func=f;return d};a.insertAttr=function(e,b,f){for(var d in b){var h=b[d];h&&h instanceof Function?f.push(a.makeAttrUpdater(e,d,h)):e.setAttribute(d,h)}};a.insertHtml=function(e,b,f,d,h){function k(d,f){var h=function(){var h=f();if(null===h||void 0===h)h="";"string"!=typeof h&&(h=""+h);d.textContent!=h&&(d.textContent=h)};h.node=d;return h}function g(d){var f=function(){d.update()};
f.node=d.node;return f}d=d||[];e&&e instanceof a&&(!h&&e.__init&&(h=e),e=e.el);if(b&&b instanceof Function){var l=document.createTextNode("");e.insertBefore(l,f);d.push(k(l,b))}else if(b instanceof a.NodeUpdater)b.makeNode(e,f),d.push(g(b));else if(b instanceof Array)b.forEach(function(b){a.insertHtml(e,b,f,d,h)});else if(b instanceof a.TagDef)if("template"==b.tag||"frag"==b.tag)a.insertHtml(e,b.children,f,d,h);else{l=document.createElement(b.tag);b.html&&(l.innerHTML=b.html);var n=null;b.attr&&((n=
b.attr.as||a.compData.tags[b.tag])&&!b.attr.template?(l.jsxAttr=b.attr,b.attr.as&&l.setAttribute("as",b.attr.as)):(h&&h.initNodeAttr(l,b.attr,h._updaters),a.insertAttr(l,b.attr,d)));e&&e.insertBefore(l,f);b.children&&b.children.length&&(n&&!b.attr.template?l.jsxChildren=b.children:a.insertHtml(l,b.children,null,d,h));return l}else{if(null===b||void 0===b)b="";"string"!=typeof b&&(b=""+b);l=document.createTextNode(b);e.insertBefore(l,f)}};a.directives={};a.extractDirectives=function(e){if(e){var b=
{},f=Object.keys(e),d=0,h;for(h in f){var k=f[h],g=k.indexOf("-");if(-1!=g){var l=k.substring(0,g);if(a.directives[l]){var n=e[k];delete e[k];k=k.substring(g+1);b[l]||(b[l]={});b[l][k]=n;d++}}}if(d)return b}};a.registerDirective=function(e,b){function f(h,a){h[d[a]]||(h[d[a]]={});a<d.length-1?f(h[d[a]],a+1):h[d[a]]._=b}var d=e.split("-");f(a.directives,0)};a.runAttrDirective=function(e,b,f,d,h,k,g){if(f)for(var p in f)if(k[p]){var n=k[p]._;n&&n(e,b,f[p],d,h,f)}else{n=g+p;var m=f[p];m&&m instanceof
Function?d.push(a.makeAttrUpdater(e,n,m)):(b||(b=new a(e)),b.attr(n,m))}};a.registerDirective("x",function(e,b,f,d,h,k){f&&a.runAttrDirective(e,b,f,d,h,a.directives.x,"x-")})})();(function(a){var g=a.prototype;a.addTag=function(e,b,f){"string"==typeof b&&(b={tag:b});return a.insertHtml(e,new a.TagDef(b.tag,b.attr,b.children||[],b.html),f)};a.add=function(e,b,f){return new a(a.addTag(e,b,f))};a.intersect=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};a.toTemplate=function(e,b){var f={tag:e.tagName,html:e.innerHTML};b=b?a.copy(b):{};if(e=e.attributes)for(var d=0;d<e.length;d++)"template"!=e[d].name&&(b[e[d].name]=e[d].value);f.attr=
b;return f};a.dom_register=function(e,b,f){a["h_"+e]=f;g[e]=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift(this.el);return f.apply(this,d)}};a.dom_register("hasAttr",!0,function(a,b,f){return a.hasAttribute(b)});a.dom_register("attr",!0,function(a,b,f){if(2<arguments.length)null===f||void 0===f?a.hasAttribute(b)&&a.removeAttribute(b):f!==a.getAttribute(b)&&a.setAttribute(b,f);else return a.getAttribute(b)});a.dom_register("attrDef",!0,function(a,b,f){return a.hasAttribute(b)?a.getAttribute(b):
f});a.dom_register("attrNum",!0,function(e,b){return a.num(a.h_attrDef(e,b))});a.dom_register("attrBoolean",!0,function(a,b,f){if(a.hasAttribute(b)){if(a=a.getAttribute(b),null===a||""==a||"true"==a||a==b||"1"==a)return!0}else return f;return!1});a.dom_register("dataAttr",!0,function(e,b,f){b="data-"+b;if(2<arguments.length)a.h_attr(e,b,f);else return a.h_attr(e,b)});a.dom_register("classIf",!1,function(a,b,f){f?a.classList.add(b):a.classList.remove(b)});a.dom_register("classUnless",!1,function(a,
b,f){f?a.classList.remove(b):a.classList.add(b)});a.dom_register("addClass",!1,function(a,b){a.classList.add(b)});a.dom_register("hasClass",!0,function(a,b){return a.classList.contains(b)});a.dom_register("toggleClass",!0,function(a,b){return a.classList.toggle(b)});a.dom_register("removeClass",!0,function(a,b){if(a.classList.length)return a.classList.remove(b)});g.setHtml=function(a){this.el.innerHTML!==a&&(this.el.innerHTML=a)};a.dom_register("setText",!1,function(a,b){a.textContent!==b&&(a.textContent=
b)});a.dom_register("getText",!0,function(a){return a.textContent})})(mi2JS);(function(){var a=mi2JS,g=a.prototype;a.hiddenAttribute="hidden";a.disabledAttribute="disabled";g.isVisible=function(){return!this.el.hasAttribute(a.hiddenAttribute)};g.setVisible=function(e){this.attr(a.hiddenAttribute,e?null:"")};g.isEnabled=function(){return!this.el.hasAttribute(a.disabledAttribute)};g.setEnabled=function(e){this.attr(a.disabledAttribute,e?null:"")};g.isSelected=function(){return this.hasClass("selected")};g.setSelected=function(a){this.classIf("selected",a)}})(mi2JS);(function(a){for(var g,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<e.length;b++)try{e[b]();g=e[b];break}catch(f){}a.ajax=function(f){xhr=g();var d=a.update({method:"GET",self:this,url:"",callback:function(){},async:!0,headers:{}},f);d.method=d.method.toUpperCase();xhr.open(d.method,d.url,d.async);"POST"!=d.method||d.headers["Content-Type"]||(d.headers["Content-Type"]="application/x-www-form-urlencoded");
for(var h in d.headers)xhr.setRequestHeader(h,d.headers[h]);var b=null;xhr.onreadystatechange=function(){4==this.readyState&&(200==this.status?(d.callback.call(d.self,this),b=this):d.errback&&d.errback.call(d.self,this))};d.timeout&&(xhr.timeout=d.timeout,xhr.ontimeout=function(){d.errback&&d.errback.call(d.self,this)});xhr.send(d.postData);return b}})(mi2JS);(function(a){a.filters={};a.addFilter=function(g,e,b){e.paramCount=b||0;a.filters[g]=e};a.getFilter=function(g){if(g instanceof Function)return g;var e=a.filters[g];if(!e)throw Error("filter not found "+g);return e};a.parseFilter=function(g,e){if(null===g||""===g)return null;var b=g.split("|");if(1<b.length)return a.multiFilter(b);g=g.split(",");return e&&g.length&&(g[0]=a.getFilter(g[0]),1==g.length)?g[0]:g};a.filterNext=function(g,e,b){return a.filter(g,Array.prototype.slice.call(e,b+2),e[1],e[2])};
a.multiFilter=function(g){for(var e=0;e<g.length;e++)g[e]=a.parseFilter(g[e]);return function(b,f,d){for(var h=0;h<g.length;h++)b=a.filter(b,g[h],f,d);return b}};a.filter=function(g,e,b,f){if(!e)return g;if(e instanceof Function)return e.apply(null,[g,b,f]);if(e instanceof Array){if(!e.length)return g;var d=e;e=d[0];e=a.getFilter(e);g=[g,b,f];1<d.length&&(g=g.concat(d.slice(1)));return e.apply(null,g)}return a.getFilter(e).apply(null,[g,b,f])};a.filterConst={UNDEFINED:void 0,NULL:null,TRUE:!0,FALSE:!1};
a.filters["const"]=function(g){return a.filterConst.hasOwnProperty(g)?a.filterConst[g]:g}})(mi2JS);(function(){var a=mi2JS;a.parse=function(g,e){var b=a.compData;g||a.nn({elem:g});"string"==typeof g&&(g=a.addHtml(g));!e&&b&&(e=(b=g.getAttribute("as")||b.tags[g.tagName])?a.makeComp(g,b,e):new a(g));return e};a.setRef=function(g,e,b,f){var d;if(b||f)-1!=(d=b.indexOf("."))?(f=b.substring(0,d),b=b.substring(d+1),a.setRef(g,e,b,f)):f?(e.__propGroup=f,b?(g[f]||(g[f]={},g["$"+f]=new a.NWGroup(g[f])),e.__propName=b,g[f][b]=e):(g[f]||(g[f]=[],g["$"+f]=new a.NWGroup(g[f])),e.__propName=g[f].length,g[f].push(e))):
(e.__propName=b,g[b]=e)};a.parseChildren=function(g,e){var b=a.compData;g=g.firstElementChild;for(var f,d;g;){f=g.nextElementSibling;d=g.getAttribute("template");if(g.getAttribute&&"TEMPLATE"!=g.tagName&&(null===d||"inline"===d)){var h=null,k;b&&(k=g.getAttribute("as")||b.tags[g.tagName])&&""!==d&&(h=a.constructComp(g,k,e));var p=g.getAttribute("p");p&&(h||(h=new a(g)),a.setRef(e,h,p),"."==p.charAt(p.length-1)&&g.setAttribute("p",p+h.__propName),!k&&e.addRef&&e.addRef(h));if(p=g.getAttribute("name"))h||
(h=new a(g)),a.setRef(e,h,p,"items");null===d&&a.parseChildren(g,e)}g=f}}})();(function(a){var g=a.compData=a.compData||{def:{},tpl:{},later:{},tags:{},counterSeq:0};g.tags.INPUT=g.tags.SELECT=g.tags.TEXTAREA="base/Input";a.addComp=function(e,b,f){b=a.addTag(f||e,b,null,e);return a.makeComp(b,null,e,f)};a.makeComp=function(e,b,f,d){e=a.constructComp(e,b,f);e.lazyInit||e.__init();return e};a.constructComp=function(e,b,f,d){try{f||(f=null);b||(b=e.getAttribute("as"))||(b=g.tags[e.tagName]);e.setAttribute("as",b);e.compRefId=a.compData.counterSeq++;var h=new (this.getComp(b,e));
h.__template=this.getCompCompTpl(b);h.construct(e,f);h.setParent(f);d=d||(f?f._updaters:[]);e.jsxAttr&&(f&&f.initChildAttr(h,e.jsxAttr,d),h.initAttr(e.jsxAttr,d),delete e.jsxAttr);e.jsxChildren&&(e.jsxChildren=h.initChildrenJsx(e.jsxChildren),a.insertHtml(e,e.jsxChildren,null,d),delete e.jsxChildren);return h}catch(k){throw console.log("error while creating a component ",b,e,"\ninside the component ",f,"\n",k),k;}};a.getCompCompTpl=function(a){var b=g.tpl[a];if(!b&&""!==b)throw Error("Component template not found: "+
a);return b};a.checkComp=function(a){return g.def[a]||g.later[a]};a.getComp=function(a,b){var f=g.def[a];!f&&g.later[a]&&(f=g.later[a]());if(!f)throw a="Component not found: "+a,console.log(a,b),Error(a);return f};a.addCompClass=function(e,b,f,d){(g.def[e]||g.later[e])&&console.error("Component with same name already defined "+e);g.tags[e.replace("/","-").toUpperCase()]=e;g.tags[e]=e;g.later[e]=function(){return a.initComp(e,b,f,d)}};a.initComp=function(e,b,f,d){var h=g.def[e],k=this.getComp(b);h||
(h=eval("(function "+e.replace("/","_")+"(){})"),h.superClass=k,a.extend(h,k));d(h.prototype,k.prototype,h,k);h.compName=e;f&&"extend:"==f?f=this.getCompCompTpl(b):f&&7<f.length&&"extend:"==f.substring(0,7)&&(f=this.getCompCompTpl(f.substring(7)));if(f||""===f)g.tpl[e]=f;return g.def[e]=h}})(mi2JS);(function(){function a(a,d){var f={};if("string"==typeof a)f[a]=d;else if(a instanceof Array||a.length){1==a.length&&a[0]instanceof Array&&(a=a[0]);for(var b=0;b<a.length;b++)f[a[b]]=d}else return a;return f}var g=mi2JS,e=g.NWGroup=function(a){if(!(this instanceof e))return new e(a);this.items=a||this},b=e.prototype;b.callFunc=function(a,d){var f,b;for(b in this.items)(f=this.items[b][a])&&f.apply(this.items[b],d)};b.item=function(a){if(a&&a.tagName){var d;this.forEach(function(f){f.el==a&&(d=f)});
return d}return this.items[a]};b.forEach=function(a,d){var f=this.items,b;for(b in f)a(f[b],b,f,d)};b.firstResult=function(a,d){var f=this.items,b;for(b in f){var e=a(f[b],b,f,d);if(void 0!==e)return e}};b.forEachGet=function(a,d){return this.items instanceof Array?this.forEachGetArray(a,d):this.forEachGetObject(a,d)};b.forEachGetArray=function(a,d){var f=this.items,b=[],e;for(e in f){var g=a(f[e],e,f,d);void 0!==g&&b.push(g)}return b};b.forEachGetObject=function(a,d){var f=this.items,b={},e;for(e in f){var g=
a(f[e],e,f,d);void 0!==g&&(b[e]=g)}return b};b.focus=function(){var a,d;for(d in this.items){var h=this.items[d];a&&!h.hasAttr("firstInput")||!h.focus||h.isReadOnly&&h.isReadOnly()||(a=h)}a&&a.focus()};b.setReadOnly=function(a){this.callFunc("setReadOnly",[a])};b.setConfig=function(){this.callFunc("setConfig",arguments)};b.setValue=function(a){a=a||{};for(var d in this.items)this.items[d].setValue(a[d])};b.validate=function(){var a=this.getValidator().validate(this.getRawValue());this.markValidate(a);
return a};b.getValidator=function(){var a=this.required,d=this.forEachGetObject(function(d,f){return g.getValidator(d,a)});return new g.GroupValidator(d,a)};b.markValidate=function(a){a=a||new g.GroupValidity({});a.item&&a.item instanceof Function?this.forEach(function(d,f){d.markValidate?d.markValidate(a.item(f)):g.markValidate(d,a.item(f))}):(console.error("GroupValidity expected"),console.log("Validity provided",a,"for",this))};b.getValue=function(){var a={},d;for(d in this.items)a[d]=this.items[d].getValue();
return a};b.getRawValue=function(){var a={},d;for(d in this.items){var h=this.items[d];a[d]=h.getRawValue?h.getRawValue():h.getValue()}return a};b.visibleIs=function(){this.toggleParams("setVisible",arguments,[!0],[!1])};b.selectedIs=function(){this.toggleParams("setSelected",arguments,[!0],[!1])};b.enabledIs=function(){this.toggleParams("setEnabled",arguments,[!0],[!1])};b.visibleNot=function(){this.toggleParams("setVisible",arguments,[!1],[!0])};b.selectedNot=function(){this.toggleParams("setSelected",
arguments,[!1],[!0])};b.enabledNot=function(){this.toggleParams("setEnabled",arguments,[!1],[!0])};b.toggleClass=function(a){this.toggleCall(Array.prototype.slice.call(arguments,1),function(d){d.classIf(a,!0)},function(d){d.classIf(a,!1)})};b.toggleAttr=function(a,d,h){this.toggleCall(Array.prototype.slice.call(arguments,3),function(f){f.attr(a,d)},function(d){d.attr(a,h)})};b.toggleParams=function(f,d,h,b){d=a(d,!0);var k=this.items,e;for(e in k){var g=d.hasOwnProperty(e)?h:b;var m=k[e];m[f].apply(m,
g)}};b.callForSome=function(f,d,h){f=a(f,!0);var b=this.items,e;for(e in b)f.hasOwnProperty(e)&&b[e][d].apply(b[e],h)};b.toggleCall=function(f,d,h){f=a(f,!0);var b=this.items,e;for(e in b){var g=f.hasOwnProperty(e)?d:h;g(b[e],e,b)}};b.forSome=function(f,d){f=a(f,!0);var h=this.items,b;for(b in h)f.hasOwnProperty(b)&&d(h[b],b,h)}})();(function(){function a(){}var g=mi2JS,e=g.prototype;g.compData.def.Base=a;g.compData.tpl.Base="";a.compName="Base";g.extend(a,g);var b=a.prototype;b.construct=function(a,d){this.state={};this.children=[];this.el=a};b.__init=function(){if(!this.__initialized){this.__initialized=!0;var a=this.initTemplate(g.h,g.t,this.state,this);this._updaters=this._updaters||[];if(a){if("template"==a.tag||"frag"==a.tag)a=a.children;a&&g.insertHtml(this.el,a,null,this._updaters,this)}this.parseChildren();this.initUpdaters();
this.initChildren();this.fireEvent("init")}};b.initChildrenJsx=function(a){return a};b.initNodeAttr=function(a,d,h){(d=g.extractDirectives(d))&&g.runAttrDirective(a,null,d,h,this,g.directives)};b.initChildAttr=function(a,d,h){(d=g.extractDirectives(d))&&g.runAttrDirective(a.el,a,d,h,this,g.directives)};b.initAttr=function(a,d){a&&a.tpl&&"function"==typeof a.tpl&&(this.__templateJsx=a.tpl,delete a.tpl);g.insertAttr(this.el,a,d)};b.initUpdaters=function(){if(this._updaters)for(var a=this._updaters.length-
1;0<=a;a--){var d=this._updaters[a];d.attr&&0===d.attr.indexOf("on")&&(this.listen(d.node,d.attr.substring(2),d.func),this._updaters.splice(a,1))}};b.initTemplate=function(a,d,h,b){this.__template&&(this.el.innerHTML=this.__template);if(this.__templateJsx)return a=this.__templateJsx,this._transitive=!0,delete this.__templateJsx,a(h,b);delete this.__template};b.parseChildren=function(){g.parseChildren(this.el,this)};b.initChildren=function(){for(var a,d=0;d<this.children.length;d++)a=this.children[d],
a.lazyInit||a.__init()};b.on_init=function(a){this.updateContent()};b.updateContent=function(){if(this._updaters)for(var a=0;a<this._updaters.length;a++)this._updaters[a].apply(this)};b.getCompName=function(){if(this.el&&this.el.getAttribute)return this.el.getAttribute("as")};b.listen=function(a,d,h,b,e){b=b||this;h=h||this["on_"+d];a.addListener?a.addListener(d,h,b):g.listen(a,d,h,b,e)};b.setTimeout=function(a,d){return setTimeout(a.bind(this),d)};b.requestAnimationFrame=function(a){return requestAnimationFrame(a.bind(this))};
b.setInterval=function(a,d){return setInterval(a.bind(this),d)};b.addListener=function(a,d,h){this.__listeners||(this.__listeners={});var f=this.__listeners[a];f||(f=this.__listeners[a]=[]);h&&(d=g.bind(h,d));f.push({callback:d,scope:h})};b.isTransitive=function(a){return this._transitive||!1};b.fireEvent=function(a){"string"==typeof a&&(a={name:a});var d=a.name,h=!1,f=a.required;a.required&&delete a.required;"show"==d&&this.__init();a||(a={});a.target=this;var b=!a.__src;b&&(a.src=a.__src=this);
var e=!0;if("parent"==a.fireTo||"parent"==a.direction)if(this.isTransitive(a)||b)this.parent&&(h=this.parent.fireEvent(a)),e=!1;if(e){if("function"==typeof this["on_"+d])try{this["on_"+d](a),h=!0}catch(m){g.logError("Error calling event handler function  on_"+d,m,{"this":this,event:a}),console.error(m.message)}var n;this.__listeners&&(n=this.__listeners[d]);if(n)for(b=0;b<n.length;b++)try{n[b].callback(a),h=!0}catch(m){g.logError("Error firing event "+d,m,{listener:n[b].scope,event:a}),console.error(m.message)}if("children"==
a.fireTo&&this.children)for(b=0;b<this.children.length;b++)n=this.children[b],(n.isVisible()||"hide"!=d&&"show"!=d)&&n.fireEvent(a)&&(h=!0)}f&&!h&&console.log("WARNING: event requred but not caught ",a.name,a,this.el,this);return h};b.addRef=function(a){this.__refs||(this.__refs=[]);this.__refs.push(a)};b.addChild=function(a){if(!this.el)throw console.log("Component not propery initialized. Must call Base constructor before parseChildren",this,this.el),Error("Component not propery initialized. Must call Base constructor before parseChildren");
for(var d=this.children.length>>>0,h=0;h<d;h++)if(a==this.children[h])return;this.children.push(a)};b.removeChild=function(){for(var a=this.children.length>>>0,d=0;d<a&&c!=this.children[d];d++);};b.setParent=function(a){var d=this.parent;d&&d.removeChild&&d.removeChild(this);(this.parent=a)&&a.addChild&&a.addChild(this)};b.findRef=function(a,d){var h=function(d){return d.el==a};"string"==typeof a&&("+"==a?a=d.el.nextElementSibling:"-"==a?a=d.el.previousElementSibling:h=function(d){return d.attr("p")==
a});var b=this.children;if(b)for(d=0;d<b.length;d++)if(h(b[d]))return b[d];if(b=this.__refs)for(d=0;d<b.length;d++)if(h(b[d]))return b[d];if(a.tagName)return new g(a)};b.find=function(a){return g.find(this.el,a)};b.findAll=function(a){return g.findAll(this.el,a)};b.replaceTag=function(a,d){d=document.createElement(d);for(var h=a.attributes,b=0;b<h.length;b++)d.setAttribute(h[b].name,h[b].value);a.parentNode.replaceChild(d,a);return d};b.isVisibleTruly=function(){for(var a=this;a;){if(!a.isVisible())return!1;
a=a.parent}return!0};b.setVisible=function(a){a!=this.isVisible()&&(e.setVisible.call(this,a),this.parent&&!this.parent.isVisibleTruly()||this.fireEvent({name:a?"show":"hide",fireTo:"children"}))};b.expandVars=function(a){for(var d in a)this.state[d]=a[d];a=this.state;this.updateContent();this.__expander||this.loadExpander();this.__expander.setValue(a);d=this.__expanderFwd.length;for(var h=0;h<d;h++)this.__expanderFwd[h].setValue(a)};b.setValue=function(a){"object"==typeof a?this.expandVars(a||{}):
this.expandVars({value:a})};b.loadExpander=function(){this.__expander=g.loadExpander(this.el,this);this.__expanderFwd=[];if(this.children)for(var a=this.children.length,d=0;d<a;d++)this.children[d].hasAttr("fwd-expand")&&this.children[d].setValue&&this.__expanderFwd.push(this.children[d])}})(mi2JS);mi2JS.addCompClass("base/Button","Base","",function(a,g,e,b){a.minClickDelay=300;a.initChildren=function(){g.initChildren.call(this);this.listen(this.el,"click")};a.on_click=function(a){if(1==a.which){var d=this.eventData(a.target,a);if(!d.cancelClick&&d.events.length&&this.parent.fireEvent){var h=Date.now();if(!(this._lastClick&&h-this._lastClick<this.minClickDelay))return this._lastClick=h,this.fireEvent(d),a.stop(),!1}}};a.eventData=function(a,d){for(var h=[],b=[],f=!1;;){this.cancelClick(a)&&
(f=!0);a.hasAttribute("event")&&h.push(a.getAttribute("event"));a.hasAttribute("action")&&b.push(a.getAttribute("action"));if(a==this.el)break;a=a.parentNode}this.__propName&&b.push(this.__propName);return{action:b[0],actions:b,events:h,name:h[0],domEvent:d,cancelClick:f,target:a,fireTo:"parent"}};a.cancelClick=function(a){return a.hasAttribute(mi2JS.disabledAttribute)?!0:(e=a.getAttribute("as"))&&a!=this.el&&!("Base"==e||"Base"==e)}});mi2JS.addCompClass("base/Group","Base","",function(a,g,e){a.setValue=null;a.isTransitive=function(a){return!0};mi2JS.mixin(e,mi2JS.NWGroup);a.expandOwnVars=a.expandVars;a.expandVars=function(a){this.forEach(function(b,d){b.expandVars&&b.expandVars(a[d])})}});mi2JS.addCompClass("base/Loop","base/Group","",function(a,g,e,b){function f(){}var d=mi2JS;a.initTemplate=function(){var a=this.el;this.__template&&(a.innerHTML=this.__template);delete this.__template;this.loadItemTpl(a);g.initTemplate.call(this);this.hasAttr("in-filter")&&(this.inFilter=d.parseFilter(this.attrDef("in-filter"),this.inFilter));this.hasAttr("out-filter")&&(this.outFilter=d.parseFilter(this.attrDef("out-filter"),this.outFilter));this.itemTpl.attr&&(this.itemTpl.attr.as=this.attrDef("item",
this.itemTpl.attr.as));this.allItems=[];this.items=[];this.count=0;this.itemMixin=function(a,d,h){}};a.initAttr=function(a,d){a.tpl&&(this.itemTpl=a.tpl,delete a.tpl);g.initAttr.apply(this,arguments)};a.findItemTpl=function(a){for(a=a.firstElementChild;a;){if(a.hasAttribute("template"))return a;if(!a.hasAttribute("as")){var d=this.findItemTpl(a);if(d)return d}a=a.nextElementSibling}};a.loadItemTpl=function(a){var h=this.findItemTpl(a)||a.firstElementChild;h&&h.tagName?(this.itemsArea=h.parentNode,
this.itemTpl=d.toTemplate(h,this.itemTpl?this.itemTpl.attr:null),this.itemNextSibling=h.nextElementSibling,h.parentNode.removeChild(h)):(this.itemsArea=a,this.itemTpl||(this.itemTpl={tag:"DIV",attr:{}}))};a.findItem=function(a){for(;a;){if(a.parentNode==this.itemsArea){for(var d=0;d<this.items.length;d++)if(this.items[d].el==a)return this.items[d];break}a=a.parentNode}};a.getItemIndex=function(a){if(!a)return-1;a instanceof d&&(a=a.el);return a.loopIndex};a.findItemsArea=function(a){for(a=a.firstChild;a;){if(a.getAttribute){if("itemsArea"==
a.getAttribute("p"))return a;if(!a.hasAttribute("as")){var d=this.findItemsArea(a);if(d)return d}}a=a.nextSibling}};a.setValue=function(a){this.setRawValue(d.filter(a,this.inFilter))};a.setRawValue=function(a){a=a||[];for(var d=0;d<a.length;d++)this.setItem(a[d],d);this.count=a.length;this.noData&&this.noData.setVisible(!this.count);this._fixItemList(!0);this.fireEvent("afterSetValue")};a.setConfig=function(a){a=a||[];for(var d=0;d<a.length;d++)this.setItem(void 0,d),this.allItems[d].setConfig(a[d]);
this.count=a.length;this.noData&&this.noData.setVisible(!this.count);this._fixItemList(!0);this.fireEvent("afterSetConfig")};a.getItems=function(){return this.items};a.getItem=function(a){return this.items[a]};a.makeItem=function(a,b){a="function"==typeof this.itemTpl;var h={},e=[];if(a){var g=this.itemTpl(h);g.attr=g.attr||{};var k=g.attr.as=g.attr.as||"Base";g=d.insertHtml(this.itemsArea,g,this.itemNextSibling,e)}else k=this.itemTpl.attr?this.itemTpl.attr.as:null,g=d.addTag(this.itemsArea,this.itemTpl,
this.itemNextSibling);if(k){k=d.constructComp(g,null,this,e);g=d.getComp(k.getCompName());var q=g.superClass;a&&(k.state=h,k._updaters=e,k.initUpdaters());k.lazyInit||k.__init();this.itemMixin(k,g.prototype,q.prototype,g,q)}else k=new d(g);k.getValue||(k.getValue=f);this.itemCreated(k,b);return k};a.itemCreated=function(a,d){this.fireEvent({name:"itemCreated",item:a,index:d,fireTo:"parent"})};a.setItemValue=function(a,d){a.setValue(d)};a.getItemValue=function(a){return a.getValue()};a.setItem=function(a,
d){var b=this.allItems[d];b||(b=this.allItems[d]=this.makeItem(a,d));b.el.loopIndex=d;void 0!=a&&(this.setItemValue(b,a),this.fireEvent({name:"afterSetItemValue",index:d,data:a,item:b}),b.setVisible(!0))};a.getRawValue=function(){return this.forEachGet(this.getItemValue.bind(this))};a.getValue=function(){return d.filter(this.getRawValue(),this.outFilter)};a.push=function(a){var d=this.count;this.setItem(a,d);this.count++;this._fixItemList();this.fireEvent({name:"afterAdd",index:d,data:a,item:this.item(d)})};
a.pop=function(a){if(0!=this.count)return this.count--,a=this.items.pop(),a.setVisible(!1),this._fixItemList(),this.fireEvent({name:"afterPop",item:a}),a};a._fixItemList=function(a){this.items=this.allItems.slice(0,this.count);if(a){a=this.allItems;for(var d=0;d<a.length;d++)a[d].el.loopIndex=d,a[d].setVisible(d<this.count)}};a.moveItem=function(a,d){var b=this.allItems.splice(a,1)[0];a<d&&d--;a=0>d?null:a=this.allItems[d].el;0>d?this.allItems.push(b):this.allItems.splice(d,0,b);this.itemsArea.insertBefore(b.el,
a);this._fixItemList(!0)};a.splice=function(a,d){for(var b=Array.prototype.splice.call(arguments,2),h=this.allItems.length-this.count,f=0;f<b.length;f++){if(0>=d){var e=0<h?this.allItems.pop():this.makeItem(b[f],a);this.allItems.splice(a,0,e);e=this.allItems[a+1];this.itemsArea.insertBefore(this.allItems[a].el,e?e.el:null);h--}this.setItem(b[f],a);a++;d--}if(0<d)for(b=this.allItems.splice(a,d),h=0;h<b.length;h++)f=b[h],this.itemsArea.insertBefore(f.el,this.itemNextSibling||null),this.allItems.push(f),
f.setVisible(!1);this.count=Math.max(this.count-d,0);this._fixItemList(!0)}});mi2JS.addCompClass("base/Table","base/Loop","",function(a,g,e,b){function f(a,b){var h=d.find(b,a);return h?h:d.addTag(a,b)}var d=mi2JS;a.itemTpl={tag:"TR",attr:{as:"Base"},html:""};a.initTemplate=function(){var a=this.el,d=this.THEAD=f(a,"THEAD"),b=f(d,"TR");a=this.TBODY=f(a,"TBODY");this.listen(a,"click",this.on_clickTbody);this.listen(d,"click",this.on_clickThead);d=a.getElementsByTagName("TH");a=[];for(var e=0;e<d.length;e++)a.push(d[e]);for(e=0;e<a.length;e++)b.appendChild(a[e]);g.initTemplate.call(this)};
a.parseChildren=function(){g.parseChildren.call(this);for(var a=this.TBODY.getElementsByTagName("TD"),b=[],e=0;e<a.length;e++)b[e]=a[e].outerHTML;e=f(this.THEAD,"TR");a={};this.columns=[];arr=e.children;for(e=0;e<arr.length;e++){var l=arr[e].getAttribute("column")||"column"+e;var n=this.findRef(arr[e]);n.__index=e;n.cellTpl=b[e]||"";a[l]=n;this.columns.push(n)}this.$columns=new d.NWGroup(a)};a.on_clickThead=function(a){};a.on_clickTbody=function(a){for(var d,b,h,f,e,g=a.target;"TBODY"!=g.tagName;){if((e=
g.getAttribute("as"))&&"Base"!=e&&"Base"!=e)return;d=d||g.getAttribute("event");b=b||g.getAttribute("action");"TD"==g.tagName&&(f=g);if("TR"==g.tagName){h=g;break}g=g.parentNode}h&&this.fireEvent({name:d||"rowClick",fireTo:"parent",action:b,domEvent:a,tr:h,td:f});a.stop();return!1};a.columnIndex=function(a){return(a=this.$columns.item(a))?a.__index:-1};a.columnIndexMap=function(a){for(var d={},b=a.length-1;0<=b;b--)d[this.columnIndex(a[b])]=!0;return d};a.extractText=function(a,b,f){var h=[];f=f||
{};a instanceof d&&(a=a.el);var e=0;for(a=a.firstElementChild;a;)b&&!b[e]||f[e]||h.push(a.textContent),e++,a=a.nextElementSibling;return h};a.getCol=function(a,b){"string"==typeof b&&(b=this.columnIndex(b));a instanceof d&&(a=a.el);var f=0;for(a=a.firstElementChild;a;){if(f==b)return a;f++;a=a.nextElementSibling}};a.hideColumns=function(){this.$columns.forSome(arguments,function(a,d){a.setVisible(!1)});this.rebuild()};a.rebuild=function(){for(var a="",d=this.columns,b=0,f=0;f<d.length;f++)d[f].isVisible()?
(a+=d[f].cellTpl,d[f].__index=b,b++):d[f].__index=-1;this.itemTpl.html=a};a.markSort=function(a){this.$columns.forEach(function(d,b){d.hasAttr("sort")&&d.attr("sort",a[b]||"")})};a.getSort=function(a){return this.$columns.forEachGetObject(function(a,d){return a.attr("sort")||void 0})};a.findItemTpl=function(a){return this.TBODY.firstElementChild}});(function(a){a.getValidator=function(a,d){return a.getValidator?a.getValidator():new e({required:a.attrBoolean("required",d),invalid:a.attr("invalid"),min:a.attr("min"),max:a.attr("max"),example:a.attr("example"),pattern:a.attr("pattern")})};a.validationMessage=function(a){return a?a.message:""};a.markValidate=function(b,d){d=d||new a.Validity;b.classIf("validation-error",d.isValid&&!d.isValid());b.attr("validation-error",d.isValid&&d.isValid()?null:a.validationMessage(d))};a.patterns={email:{pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$",
invalid:"invalid_email_address"},"int":{pattern:"^-*\\d+$",example:"123",invalid:"must_be_integer"},"float":{pattern:"^-*((\\d+)|(\\d+\\.\\d+))$",example:"11.45",invalid:"must_be_decimal"}};var g=a.Validity=function(a){0==arguments.length||!0===a||null===a||void 0===a?this.valid=!0:(this.valid=!1,"string"==typeof a&&(a={message:a}),this.message=a.message||"invalid_value",this.type=a.type||"custom",this.data=a.data||{})};g.required=function(a){return new g(a?{message:"required",type:"required"}:void 0)};
g.prototype.isValid=function(){return this.valid};var e=a.Validator=function(a,d){a?a instanceof Function&&(a={pattern:a,required:d}):a={required:d};this.rules=a};e.prototype.validate=function(b){var d=this.rules;if(null===b||void 0===b||""===b)return g.required(d.required);if(d.pattern&&"function"==typeof d.pattern)return d.pattern(b,d)||new g;if(!d.pattern)return new g;if(a.patterns[d.pattern]){var h=a.patterns[d.pattern];if("function"==typeof h)return h(b,d)||new g;d.pattern=h.pattern;d.example||
(d.example=h.example);d.invalid||(d.invalid=h.invalid)}if(!(new RegExp(d.pattern)).test(b))return new g({type:"pattern",message:d.invalid||"invalid_value",data:{example:d.example}});h=void 0!==d.min&&null!==d.min;var f=void 0!==d.max&&null!==d.max;if(h||f){b=a.num(b);var e=a.num(d.min);d=a.num(d.max);var l={type:"invalid_range",data:{min:e,max:d}};if(f&&h){if(b<e||b>d)l.message="must_be_between"}else f?b>d&&(l.message="max_allowed_value"):h&&b<e&&(l.message="min_allowed_value");if(l.message)return new g(l)}return new g};
(a.GroupValidator=function(a,d){this.required=d;d=this.items=a instanceof Array?[]:{};var b;for(b in a){var f=a[b];d[b]=f&&"function"==typeof f.validate?f:new e(f)}}).prototype.validate=function(a){if(null===a||void 0===a)return g.required(this.required);var d={},f;for(f in this.items)d[f]=this.items[f].validate(a[f]);return new b(d)};var b=a.GroupValidity=function(a){var d=this.items=a instanceof Array?[]:{},b;for(b in a){var f=a[b];d[b]=f&&"function"==typeof f.isValid?f:new g(f)}};b.prototype.item=
function(a){return this.items[a]};b.prototype.isValid=function(a){if(void 0!==a)return a=this.items[a],!a||a.isValid();for(var d in this.items)if(!this.items[d].isValid())return!1;return!0};b.prototype.setValid=function(a,d){this.items[a]=d&&"function"==typeof d.isValid?item:new g(d)}})(mi2JS);mi2JS.addCompClass("base/InputBase","Base","",function(a,g,e,b){var f=mi2JS;a.initChildren=function(){g.initChildren.call(this);this.hasAttr("in-filter")&&(this.inFilter=f.parseFilter(this.attrDef("in-filter"),this.inFilter));this.hasAttr("out-filter")&&(this.outFilter=f.parseFilter(this.attrDef("out-filter"),this.outFilter))};a.setReadOnly=function(a){this.attr("readonly",a?"":null)};a.isReadOnly=function(a){return this.hasAttr("readonly")};a.setValue=function(a){this.setRawValue(f.filter(a,this.inFilter));
this.oldValue=this.getValue()};a.getValue=function(){return f.filter(this.getRawValue(),this.outFilter)};a.markValidate=function(a){f.markValidate(this,a)};a.checkSubmit=function(a){this.checkSubmitKey(a)&&this.parent&&this.fireEvent(this.eventData(a))};a.eventData=function(a){return{name:this.attrDef("event","submit"),action:this.attr("action"),domEvent:a,fireTo:"parent"}};a.checkSubmitKey=function(a){return 13==a.keyCode&&!this.attrBoolean("no-submit")};a.checkChanged=function(a,b){return b!==a};
a.fireIfChanged=function(a){this.timer&&clearTimeout(this.timer);this.timer=this.setTimeout(this.fireIfChangedNow,50)};a.fireIfChangedNow=function(a){a=this.oldValue;var d=this.getValue();this.checkChanged(a,d)&&(this.oldValue=d,this.fireEvent({name:"change",oldValue:a,value:d}))}});mi2JS.addCompClass("base/Input","base/InputBase","",function(a,g,e,b){var f=mi2JS;a.construct=function(a,b){g.construct.call(this,a,b);b=a.tagName;if("INPUT"!=b&&"SELECT"!=b&&"TEXTAREA"!=b)throw console.log("Input component can only be used for INPUT,SELECT,TEXTAREA",a),Error("Input component can only be used for INPUT,SELECT,TEXTAREA");};a.parseChildren=function(){g.parseChildren.call(this);this.useValue=this.attrDef("value",!0);this.unchecked=this.attrDef("unchecked",!1);this.notNull=this.attrDef("not-null",
!1);this.def=this.attrDef("default","");this.typingFilter=this.attrDef("typing-filter",this.typingFilter);var a=this.el;this.input||(this.input=this);(this.inp=this.input.el)||console.log("input problem",this.el);"checkbox"==a.type&&(a=a.nextElementSibling)&&a.className&&-1!=a.className.indexOf("checkboxLabel")&&this.listen(a,"click",function(){!this.isReadOnly()&&this.isEnabled()&&(this.inp.checked=!this.inp.checked,this.fireIfChanged())});this.listen(this.input.el,"blur","on_blur");this.listen(this.input.el,
"keypress",this.checkSubmit);this.hasAttr("autocomplete")||this.attr("autocomplete","fu-chrome")};a.on_blur=function(a){this.typingFilter&&(this.inp.value=f.filter(this.inp.value,this.typingFilter))};a.setConfig=function(a){var d=this.inp;if("SELECT"!=d.tagName)throw Error("setData supported only for SELECT element");for(;d.options.length;)d.options.remove(0);for(var b,f=0;f<a.length;f++)b=a[f].id?new Option(a[f].text,a[f].id):new Option(a[f],a[f]),d.options.add(b)};a.setReadOnly=function(a){g.setReadOnly.call(this,
a);this.inp.readOnly=a;"checkbox"==this.inp.type&&(this.inp.disabled=a)};a.setRawValue=function(a){if(null===a||"undefined"==typeof a)a="";"checkbox"==this.inp.type?this.inp.checked=a==this.useValue:this.inp.value=a;this.hasOwnProperty("oldValue")&&this.fireIfChanged()};a.getRawValue=function(){if("checkbox"==this.inp.type)return this.inp.checked?this.useValue:this.unchecked;var a=this.inp.value;if(""===a||null===a)a=this.notNull?this.def:null;return a};a.focus=function(){this.inp.focus&&this.inp.focus();
this.inp.select&&this.inp.select()};a.addListener=function(a,b,f){"change"==a&&this.trackChanges();g.addListener.call(this,a,b,f)};a.trackChanges=function(){this.tracking||(this.tracking=!0,this.oldValue=this.getValue(),this.listen(this.inp,"change","fireIfChanged"),this.listen(this.inp,"click","fireIfChanged"),this.listen(this.inp,"keydown","fireIfChanged"))}});mi2JS.addCompClass("base/AutoComplete","base/InputBase",'<div p="div" class="AutoCompleteList" hidden></div><input type="hidden" p="idInput"/><input type="text" p="textInput" autocomplete="auto-complete"/><b class="bt icon icon-delete" p="clearBt" event="clear" as="base/Button" hidden></b>',function(a,g,e,b){var f=mi2JS;a.loadDelay=100;a.construct=function(a,b){g.construct.call(this,a,b);this.data=[]};a.initTemplate=function(){"INPUT"==this.el.tagName&&(this.el=this.replaceTag(this.el,"SPAN"));g.initTemplate.apply(this,
arguments)};a.initChildren=function(){g.initChildren.call(this);this.addClass("AutoComplete");this.idInput.attr("name",this.attr("name"));this.noEmpty=this.attrBoolean("no_empty");this.freeText=this.attrBoolean("free_text");this.allowNew=this.attrBoolean("allow_new");this.emptyText=this.attrDef("empty_text","");this.clearBt.setVisible(!this.attrBoolean("disable_clear_button")&&(this.textInput.el.value||"")!=this.emptyText);this.emptyText&&this.setText(this.emptyText);this.list=[];this.displayLimit=
mi2JS.num(this.attr("limit")||999999);this.showall=this.attrBoolean("showall");this.listen(this.textInput.el,"focus",function(a){this.isReadOnly()||(this.firstKey=this.hasFocus=!0,this.selectFirst=!1,this.lastTextValue=this.textInput.el.value,this.textInput.el.select(),this.callLoad(!0))});this.listen(this.textInput.el,"blur",function(a){this.isReadOnly()||(this.on_blur(),this.hide())});this.listen(this.textInput.el,"keydown",function(a){if(!this.isReadOnly())if(9==a.keyCode)this.on_blur();else if(13==
a.keyCode)return this.applySelection(),a.stop(),this.next(),!1});this.listen(this.div.el,"click",function(a){this.selectElem(a.target)&&(this.applySelection(),this.next())});this.listen(this.div.el,"mouseover",function(a){this.selectElem(a.target)});this.listen(this.textInput.el,"keyup",function(a){if(!this.isReadOnly()){if((38==a.keyCode||40==a.keyCode)&&0<this.count){var d=this.selected;d=d?d.index:-1;d+=40==a.keyCode?1:-1;if(0>d||d>=this.count)d=40==a.keyCode?0:this.count-1;this.selectElem(this.list[d].el)}else this.firstKey=
!1;this.selectFirst=""!=this.textInput.el.value;this.callLoad()}})};a.on_init=function(){g.on_init.apply(this,arguments);this.textInput.attr("placeholder",this.attr("placeholder"))};a.on_blur=function(){this.hasFocus=!1;this.lastTextValue!==this.textInput.el.value&&(this.freeText?(this.idInput.el.value=this.textInput.el.value,this.fireIfChanged()):this.applySelection(this.allowNew))};a.on_clear=function(){this.isReadOnly()||(this.setText(this.emptyText),this.setValue("",!0),this.textInput.disabled=
!1)};a.next=function(){this.nextInput?this.nextInput.focus():this.textInput.el.blur();this.parent&&this.fireEvent({name:"nextInput",fireTo:"parent"})};a.focus=function(){this.textInput.el.focus()};a.hide=function(a){clearTimeout(this.hideTimer);this.hideTimer=this.setTimeout(function(){this.div.setVisible(!1);this.selectFirst=!1},200)};a.selectElem=function(a){for(;a&&!a.data;){if(a==this.div.el)return!1;a=a.parentNode}this.selected&&f(this.selected).removeClass("selected");a&&f(a).addClass("selected");
this.selected=a;return!0};a.callLoad=function(a){var d=this.textInput.el.value;if(d!=this.oldVal||a)this.oldVal=d,clearTimeout(this.loadTimer),this.loadTimer=this.setTimeout(function(){this.loadResults(this.textInput.el.value.toLowerCase(),this)},a?5:this.loadDelay)};a.updateText=function(){this.updateTextFromData()};a.getOptions=function(){return this.data};a.getTextFor=function(a){return(a=this.getDataFor(a))?a.name||a.text:null};a.getDataFor=function(a){var d=this.getOptions();if(a)for(var b=0;b<
d.length;b++)if(d[b].id==a)return d[b];return null};a.updateTextFromData=function(){this.textInput.disabled=!1;var a=this.getOptions();1>=a.length&&this.noEmpty&&(this.textInput.disabled=!0,this.clearBt.setEnabled(!1));this.selectedData=this.getDataFor(this.getValue());this.setText(this.selectedData?this.selectedData.name||this.selectedData.text:this.emptyText);this.getValue();this.noEmpty&&0<a.length&&!this.getText()&&(this.selectedData=a[0],this.setValue(a[0].id))};a.loadResults=function(a,b){this.filterResults(a,
b)};a.filterResults=function(a,b){b=this.getOptions();var d=[];a=a?a.toLowerCase():"";for(var f=-1,e=-1,h=0;h<b.length&&!(-1!=(b[h].name||b[h].text||"").toLowerCase().indexOf(a)&&(e=h,this.selectFirst&&-1==f&&(f=d.length),d.push(b[h])),0<this.displayLimit&&d.length>=this.displayLimit);h++);a=this.showall||this.firstKey;if(1<d.length||!this.noEmpty||a)a&&0<this.displayLimit&&b.length<this.displayLimit?(d=b,f=e):this.selectFirst&&this.list.length&&(f=0);this.showResults(d);-1!=f?this.selectElem(this.list[f].el):
this.selectElem(null)};a.showResults=function(a){if(this.emptyText&&this.showall){var d=a;a=[{id:"",text:this.emptyText}];for(var b=0;b<d.length;b++)a.push(d[b])}d=this.count=a.length;var e=this.idInput.el.value;for(b=0;b<d;b++){var g=this.list[b];b>=this.list.length&&(g=this.list[b]=f(mi2JS.addTag(this.div,{tag:"DIV",attr:{"class":"acItem"}})),g.el.index=b);g.el.innerHTML=a[b].html||a[b].name||a[b].text;g.el.data=a[b];g.setVisible(!0);this.selectFirst&&0==b&&(e=a[b].id);g.classIf("selected",e==a[b].id);
e==a[b].id&&(this.selected=g.el)}for(b=a.length;b<this.list.length;b++)this.list[b].setVisible(!1);this.hasFocus&&0<this.count&&(this.div.setVisible(!0),this.div.el.style.top=this.textInput.el.offsetHeight+"px",this.div.el.style.minWidth=this.textInput.el.offsetWidth-this.div.el.offsetWidth+this.list[0].el.offsetWidth+"px")};a.applySelection=function(a){var d={};this.selected&&(d=this.selected.data||d);a&&(d.name||d.text)!=this.textInput.el.value?(d={text:this.textInput.el.value},this.idInput.el.value=
""):(this.selectedData=d,this.idInput.el.value=d.id||"",this.setText(d.name||d.text));this.fireIfChanged();this.fireEvent({name:"afterSelect",selected:d,fireTo:"parent"})};a.getSelectedData=function(){return""==this.idInput.el.value?null:this.selectedData};a.setReadOnly=function(a){this.clearBt.setVisible(!a&&!this.attr("disable_clear_button")&&(this.textInput.el.value||"")!=this.emptyText);this.textInput.el.readOnly=a};a.isReadOnly=function(a){return this.textInput.el.readOnly};a.setValue=function(a,
b){if(null===a||void 0===a)a="";this.idInput.el.value=a;this.updateText();b?this.fireIfChanged():this.oldValue=this.getValue()};a.getValue=function(){return this.idInput.el.value};a.getText=function(){return this.textInput.el.value||""};a.setText=function(a){this.textInput.el.value=a||this.emptyText;this.clearBt.setVisible(!this.attrBoolean("disable_clear_button")&&(this.textInput.el.value||"")!=this.emptyText)};a.validate=function(a){var d=this.attr("required");if((null===d?a:"1"==d)&&!this.getValue())return{message:t("required"),
type:"required"}}});mi2JS.addCompClass("base/Calendar","base/InputBase",'<input p="input" as="base/Input">',function(a,g,e,b){var f=mi2JS;a.construct=function(a,b){g.construct.call(this,a,b)};a.initTemplate=function(){"INPUT"==this.el.tagName&&(this.el=this.replaceTag(this.el,"SPAN"));g.initTemplate.apply(this,arguments)};a.initChildren=function(){g.initChildren.call(this);var a=this.editType=(this.attr("type")||"date").toLowerCase();this.hasAttr("datetime")&&(a="datetime");this.editTime="time"==a||"datetime"==a;this.editDate=
"time"!=a;this.typingFilter=this.attrDef("typing-filter",this.typingFilter);this.addClass("Calendar");this.widget=f.addComp(this,{tag:"DIV",attr:{as:"base/CalendarWidget"}});this.widget.setVisible(!1);this.listen(this.input.el,"focus","on_focus");this.listen(this.input.el,"blur","on_blur");this.listen(this.widget,"focus",function(){clearTimeout(this.hideTimer)});this.listen(this.widget,"blur","on_blur");this.input.trackChanges();this.listen(this.input,"change","on_changeInput")};a.on_init=function(){g.on_init.apply(this,
arguments);"INPUT"!=this.el.tagName&&(this.input.attr("name",this.attr("name")),this.input.attr("placeholder",this.attr("placeholder")),this.input.attr("value",this.attr("value")))};a.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)};a.setReadOnly=function(a){this.input.el.readOnly=a};a.isReadOnly=function(a){return this.input.el.readOnly};a.on_focus=function(a){this.isReadOnly()||(clearTimeout(this.hideTimer),this.editDate&&(this.insertBefore(this.widget.el,this.input.el),this.widget.el.style.top=
this.input.el.offsetHeight+"px",a=this.input.el.value,a=""==a?new Date:this.parseValue(),this.widget.update(a),this.input.el.select(),this.showWidget(!0)))};a.showWidget=function(a){this.widget.setEditTime(this.editTime);this.widget.setVisible(a);this.widgetVisible=a};a.on_blur=function(a){this.isReadOnly()||(a=this.input.el,this.typingFilter&&(a.value=f.filter(a.value,this.typingFilter)),this.fireIfChanged(),this.hideTimer=this.setTimeout(function(){this.showWidget(!1)},100))};a.on_changeInput=function(a){this.isReadOnly()||
(a=this.parseValue())&&this.widgetVisible&&this.widget.update(a)};a.on_dateSelected=function(a){this.setValue(a.date);this.on_blur({});this.input.el.blur();this.fireEvent({name:"nextInput",eventFor:"parent"})};a.validate=function(a){var d=this.attr("required");a=null===d?a:"1"==d;if(!this.input.el.value){if(a)return{type:"required",message:t("required")}}else if(!this.parseValue())return{type:"invalid",message:t("invalid_value")};return null};a.updateInput=function(){var a="";this.date&&(a=this.editDate&&
this.editTime?f.printDateTime(this.date):this.editDate?f.printDate(this.date):f.printTime(this.date));this.input.el.value=a};a.getRawValue=function(){var a=this.date=this.parseValue();return a?a:null};a.setRawValue=function(a){this.date=!a||a instanceof Date?a:new Date(a);this.updateInput()};a.parseValue=function(){var a=this.input.el.value;return this.editDate&&this.editTime?f.parseDateTime(a):this.editDate?f.parseDate(a):f.parseTime(a)};a.focus=function(){this.input.focus()}});mi2JS.addCompClass("base/CalendarWidget","Base",'<div class=""><select p="year" as="base/Input"></select><select p="month" as="base/Input"><option value="0">January</option><option value="1">February</option><option value="2">March</option><option value="3">April</option><option value="4">May</option><option value="5">June</option><option value="6">July</option><option value="7">August</option><option value="8">September</option><option value="9">October</option><option value="10">November</option><option value="11">December</option></select></div><div class="calendar-mid"><table><thead p="dayNames" names="Su,Mo,Tu,We,Th,Fr,Sa"></thead><tbody p="dayGrid" class="CalendarDays"></tbody></table><div hidden p="timeArea"><div><input p="times."/></div><input p="times."/><span>:</span><input p="times."/><input p="times."/></div></div><div class="buttons"><a p="today" class="bt" as="base/Button" event="today">Today</a><a p="done" class="bt" as="base/Button" event="done">Done</a><a p="clear" class="bt" as="base/Button" event="done" action="clear">Clear</a><input p="timeInput" size="5" as="base/Input"/></div>',
function(a,g,e,b){var f=mi2JS;a.construct=function(a,b){g.construct.call(this,a,b);this.dayOffset=1};a.initChildren=function(){g.initChildren.call(this);this.addClass("CalendarWidget");this.listen(this.dayGrid.el,"mousedown","on_dayClick");this.year.trackChanges();this.month.trackChanges();this.listen(this.month,"change","on_selectChange");this.listen(this.year,"change","on_selectChange");this.listen(this.timeInput.el,"blur",function(){this.setDate()});this.listen(this.timeInput.el,"keypress",function(a){if(13==
a.keyCode)this.on_done()});this.date=new Date;this.initElements();var a=[this.done.el,this.year.el,this.month.el,this.today.el,this.done.el,this.clear.el,this.timeInput.el];this.listen(this.el,"mousedown",function(d){for(var b=0;b<a.length;b++)if(d.target==a[b])return;this.done.el.focus()});for(var b=0;b<a.length;b++)this.listen(a[b],"focus","fireFocus"),this.listen(a[b],"blur","fireBlur")};a.fireFocus=function(a){this.fireEvent({name:"focus",domEvent:a})};a.fireBlur=function(a){this.fireEvent({name:"blur",
domEvent:a})};a.initElements=function(){for(var a=f.addTag(this.dayNames.el,"TR"),b=this.dayNames.el.getAttribute("names").split(","),e=0;7>e;e++){var g=(e+this.dayOffset)%7;f.addTag(a,{tag:"TH",attr:{"class":"day"+g},html:b[g]})}this.days=[];for(b=0;6>b;b++)for(a=f.addTag(this.dayGrid.el,"TR"),e=0;7>e;e++)this.days.push(f.addTag(a,"TD"))};a.setEditTime=function(a){this.timeInput.setVisible(a)};a.on_selectChange=function(a){this.setDate(this.year.getValue(),this.month.getValue())};a.setDate=function(a,
b,f){var d=this.date;d||(d=new Date(0,0,0,0,0,0,0));var e=this.parseTime(this.timeInput.getValue());this.update(new Date(a||d.getFullYear(),"undefined"!==typeof b?b:d.getMonth(),f||d.getDate(),e[0],e[1],e[2]))};a.update=function(a){this.date=a;var b=new Date;a||(a=b);var d=new Date(a.getFullYear(),a.getMonth(),1),f=(d.getDay()-this.dayOffset+7)%7;0===f&&(f=7);var e=new Date(d.getFullYear(),d.getMonth(),1-f),g=this.days.length;for(d=0;d<g;d++){var m=this.days[d],q=m.date=new Date(e.getFullYear(),e.getMonth(),
e.getDate()+d);d<f?m.className="prevMonth":q.getMonth()!=a.getMonth()?m.className="nextMonth":(m.className="curMonth",this.date&&q.getDate()==a.getDate()&&q.getMonth()==a.getMonth()&&(m.className+=" selected"),q.getFullYear()==b.getFullYear()&&q.getMonth()==b.getMonth()&&q.getDate()==b.getDate()&&(m.className+=" today"));m.className+=" day"+q.getDay();m.innerHTML=q.getDate()}b=a.getFullYear();years=[];for(d=b-5;d<b+5;d++)years.push(""+d);this.year.setConfig(years);this.year.setValue(b);this.month.setValue(a.getMonth());
this.timeInput.setValue(this.formatTime(a))};a.formatTime=function(a){return a?f.num2(a.getHours())+":"+f.num2(a.getMinutes()):"00:00"};a.parseTime=function(a){var b=[0,0,0];if(!a)return b;a=a.split(":");for(var d=0;3>d&&d<a.length;d++)a[d]&&(b[d]=f.num(a[d]));return b};a.on_dayClick=function(a){a=a.target;"TD"==a.tagName&&(a=a.date,this.setDate(a.getFullYear(),a.getMonth(),a.getDate()),this.on_done())};a.on_done=function(a){this.setDate();var b=this.date;a&&"clear"==a.action&&(b=null);this.fireEvent({name:"dateSelected",
widget:this,date:b,fireTo:"parent"})};a.on_today=function(a){a=new Date;this.setDate(a.getFullYear(),a.getMonth(),a.getDate());this.on_done()}});mi2JS.addCompClass("base/ShowHide","Base",'<div p="title"></div><b p="button"></b>',function(a,g,e,b){a.initTemplate=function(){var a=this.el;this.titleHTML=a.innerHTML;a.innerHTML="";g.initTemplate.call(this);this.texts=this.attrDef("texts","&#x25B2;,&#x25BC;").split(",")};a.initChildren=function(){g.initChildren.call(this);this.title.setHtml(this.titleHTML);this.listen(this.el,"click");var a=this.attrDef("target","+");this.panel=this.parent.findRef(a,this);if(!this.panel)throw Error("Panel not found "+
a);this.panel.addClass("ShowHidePanel");this.updateButton()};a.updateButton=function(){try{var a=this.panel.isVisible()?1:0;this.button.setHtml(this.texts[a]);this.classIf("collapsed",!a)}catch(d){console.error("updateButton error "+d.message)}};a.setValue=function(a){this.panel.setVisible(a)};a.getValue=function(a){return this.panel.isVisible()};a.on_click=function(a){this.setValue(!this.getValue());this.updateButton();this.fireEvent({name:"change",value:this.panel.isVisible()})}});mi2JS.addCompClass("base/Pager","Base",'<b as="base/Button" event="page" action="prev" class="disabled" p="prev">Previous</b><span p="pagesArea"></span><b as="base/Button" event="page" action="next" class="disabled" p="next">Next</b>',function(a,g,e,b){var f=mi2JS;a.initChildren=function(){g.initChildren.call(this);this.pages=[];this.opts={pagesAbout:5};this.setup({})};a.setup=function(a){this.opts=f.update({pagesAbout:5},a);a=2*this.opts.pagesAbout+1;for(var b=0;b<a;b++)b>=this.pages.length&&(this.pages[b]=
f.addComp(this,{tag:"B",attr:{as:"base/Button",event:"page"}},this.pagesArea.el),this.pages[b].setText(b+1));for(b=a;b<this.pages.length;b++)this.pages[b].setVisible(!1)};a.update=function(a){this.limit=a.limit||0;this.offset=a.offset||0;this.rowCount=a.rowcount||0;this.pagesCount=a.limit?Math.ceil(a.rowcount/a.limit):0;this.attr("pages-count",this.pagesCount);this.curPage=a.limit?Math.ceil(a.offset/a.limit):0;a=this.curPage-this.opts.pagesAbout;a+2*this.opts.pagesAbout>this.pageCount&&(a=this.pagesCount-
2*this.opts.pagesAbout);0>a&&(a=0);for(var b=this.pages.length>>>0,d=2*this.opts.pagesAbout+1,e=0;e<b;e++)this.pages[e].setVisible(e<d&&e+a<this.pagesCount),this.pages[e].classIf("current",e+a==this.curPage),this.pages[e].setText(e+a+1),this.pages[e].attr("action",e+a),this.pages[e].event="page";this.prev.setEnabled(0<this.curPage);this.prev.attr("action",this.curPage-1);this.next.setEnabled(this.curPage<this.pagesCount-1);this.next.attr("action",this.curPage+1)};a.on_page=function(a){this.fireEvent({name:"page",
page:a.action,offset:f.num(a.action)*this.limit,fireTo:"parent"})}});
//# sourceMappingURL=mi2.map  
